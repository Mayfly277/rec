<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="Pentest viewer">
    <meta name="author" content="Mayfly">
    <title>REC</title>
    <!-- Bootstrap core CSS -->
    <link href="static/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="static/asciinema/asciinema-player.css" />
    <link rel="stylesheet" type="text/css" href="static/sidebar.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css">
  </head>

  <body>
  <div class="d-flex" id="wrapper">

<!-- Sidebar -->
<div class="bg-light border-right" id="sidebar-wrapper">
  <a href="/">
	<div class="sidebar-heading"><i class="bi bi-terminal"></i>  REC</div>
  </a>
  <div class="list-group list-group-flush">
  {% for date,link in links.items() %}
    <a href="#" onclick="play('{{link['target']}}','{{link['cmd']}}')" class="list-group-item list-group-item-action bg-light">
	    <i class="bi bi-terminal-fill"></i>
	    {{date}} : {{link['cmd'][:30]}}
    </a>
  {% endfor %}
  </div>
</div>
<!-- /#sidebar-wrapper -->

<!-- Page Content -->
<div id="page-content-wrapper">

  <nav class="navbar navbar-expand-lg navbar-light bg-light border-bottom">
    <button class="btn btn-primary" id="menu-toggle"><i class="bi bi-list"></i></button>

    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
  </nav>

  <div class="container-fluid">
    <div id="video">
     Tools to record commands on demand

<pre><code>
- start a command and record it :
rec <command>

- play recorded command :
rec_play

- start server :
rec_browse_start (This launch a python server on http://127.0.0.1:5000/)

- stop server :
rec_browse_stop

- clean commands recorded :
rec_clean

- launch rec for multiples commands with a name (juste like asciinema)
rec_start <record_name> (type ctrl+D or exit to exit)
</code></pre>
   </div>
  </div>
</div>
<!-- /#page-content-wrapper -->

</div>
<!-- /#wrapper -->


<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
<script>window.jQuery || document.write('<script src="../static/js/vendor/jquery.slim.min.js"><\/script>')</script>
<script src="static/dist/js/bootstrap.bundle.min.js"></script>
<script src="static/asciinema/asciinema-player.js"></script>

  <!-- Menu Toggle Script -->
  <script>
    $("#menu-toggle").click(function(e) {
      e.preventDefault();
      $("#wrapper").toggleClass("toggled");
    });

    function play(filename, infos){
	    document.getElementById('video').innerHTML = '<code>' + infos + '</code><asciinema-player src="' + filename + '" poster="npt:0:10"></asciinema-player>';
    }
  </script>

</body>
</html>
